<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  img-src 'self' data:;
  connect-src 'self'
    https://t9x8zj0h-8000.asse.devtunnels.ms
    https://2zhz9n54-8000.asse.devtunnels.ms
    https://accounts.google.com
    https://securetoken.googleapis.com
    https://www.googleapis.com
    https://identitytoolkit.googleapis.com;
  style-src 'self'
    https://cdn.jsdelivr.net
    https://www.gstatic.com
    https://fonts.googleapis.com
    'unsafe-inline';
  font-src 'self' https://cdn.jsdelivr.net;
  script-src 'self'
    https://cdn.jsdelivr.net
    https://www.gstatic.com
    https://apis.google.com
    'unsafe-inline';
">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Awesomeree Buddies</title>
  <!-- External Stylesheets -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="lateshipment.css">
  <link rel="stylesheet" href="returnitem.css">
  <link rel="stylesheet" href="stockcount.css">
  <link rel="stylesheet" href="stockcount.js">
  <style>
    /* Arrange the calendar day selectors in a horizontal row */
    #calendarDays {
      display: flex;
      flex-direction: row;
      justify-content: space-around;
      align-items: center;
      gap: 10px; /* Optional: adds spacing between days */
    }
    /* Optional: Make each day element take up equal width */
    #calendarDays .calendar-day {
      flex: 1;
      text-align: center;
    }
  </style>

</head>

<body>
  <div class="wrapper">
    <!-- Sidebar -->
    <nav id="sidebar">
      <div class="sidebar-header">
        <h3>Shop Analytics</h3>
        <button class="toggle-btn" onclick="toggleSidebar()">
          <i class="bi bi-list"></i>
        </button>
      </div>
      <ul class="list-unstyled components">
        <li>
          <a href="#" class="nav-link active" onclick="showPage('overview')">
            <i class="bi bi-grid"></i>
            <span>Overview</span>
          </a>
        </li>
        <!-- Example of dropdown for Account Health -->
        <li class="dropdown">
          <a
            href="#"
            class="nav-link dropdown-toggle"
            data-bs-toggle="collapse"
            data-bs-target="#accountHealthSubMenu"
            aria-expanded="false"
          >
            <i class="bi bi-heart"></i>
            <span>Account Health</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <div class="collapse" id="accountHealthSubMenu">
            <ul class="nav flex-column submenu">
              <li>
                <a href="#" class="nav-link" onclick="showPage('account-health-shopee-my')">
                  <i class="bi bi-cart"></i>
                  <span>Shopee MY</span>
                </a>
              </li>
              <li>
                <a href="#" class="nav-link" onclick="showPage('account-health-shopee-sg')">
                  <i class="bi bi-cart"></i>
                  <span>Shopee SG</span>
                </a>
              </li>
              <li>
                <a href="#" class="nav-link" onclick="showPage('account-health-tiktok')">
                  <i class="bi bi-music-note"></i>
                  <span>TikTok</span>
                </a>
              </li>
            </ul>
          </div>
        </li>
        <li class="dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="collapse" data-bs-target="#lateShipmentSubMenu" aria-expanded="false">
            <i class="bi bi-truck"></i>
            <span>Late Shipment</span>
            <i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <div class="collapse" id="lateShipmentSubMenu">
            <ul class="nav flex-column submenu">
              <li>
                <a href="#" class="nav-link" onclick="showPage('late-shipment-shopee-my')">
                  <i class="bi bi-cart"></i>
                  <span>Shopee MY</span>
                </a>
              </li>
              <li>
                <a href="#" class="nav-link" onclick="showPage('late-shipment-shopee-sg')">
                  <i class="bi bi-cart"></i>
                  <span>Shopee SG</span>
                </a>
              </li>
              <li>
                <a href="#" class="nav-link" onclick="showPage('late-shipment-tiktok')">
                  <i class="bi bi-music-note"></i>
                  <span>TikTok</span>
                </a>
              </li>
            </ul>
          </div>
        </li>
       <!-- First dropdown: Requests -->
       <li>
        <a href="#" class="nav-link" onclick="showPage('stock-count')">
          <i class="bi bi-box-seam"></i>
          <span>Stock Count</span>
        </a>
      </li>
      <li class="dropdown">
        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="collapse" data-bs-target="#requestsSubMenu" aria-expanded="false">
          <i class="bi bi-box-arrow-in-left"></i>
          <span>Requests</span>
          <i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <div class="collapse" id="requestsSubMenu">
          <ul class="nav flex-column submenu">
            <li>
              <a href="#" class="nav-link" onclick="showPage('return-item-submit')">
                <i class="bi bi-arrow-return-left"></i>
                <span>Return Items</span>
              </a>
            </li>
            <li>
              <a href="#" class="nav-link" onclick="showPage('repairs-submit')">
                <i class="bi bi-tools"></i>
                <span>Repairs</span>
              </a>
            </li>
            <li>
              <a href="#" class="nav-link" onclick="showPage('shopee-claims-submit')">
                <i class="bi bi-shop"></i>
                <span>Shopee Claims</span>
              </a>
            </li>
          </ul>
        </div>
      </li>

      <!-- Second dropdown: View Requests -->
      <li class="dropdown">
        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="collapse" data-bs-target="#viewRequestsSubMenu" aria-expanded="false">
          <i class="bi bi-clock-history"></i>
          <span>View Requests</span>
          <i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <div class="collapse" id="viewRequestsSubMenu">
          <ul class="nav flex-column submenu">
            <li>
              <a href="#" class="nav-link" onclick="showPage('return-item-history')">
                <i class="bi bi-arrow-return-left"></i>
                <span>Return Items</span>
              </a>
            </li>
            <li>
              <a href="#" class="nav-link" onclick="showPage('repairs-history')">
                <i class="bi bi-tools"></i>
                <span>Repairs</span>
              </a>
            </li>
            <li>
              <a href="#" class="nav-link" onclick="showPage('shopee-claims-history')">
                <i class="bi bi-shop"></i>
                <span>Shopee Claims</span>
              </a>
            </li>
          </ul>
        </div>
      </li>

        <li>
          <a href="#" class="nav-link" onclick="showPage('settings')">
            <i class="bi bi-gear"></i>
            <span>Settings</span>
          </a>
        </li>
      </ul>
    </nav>
    
    <!-- Modified Content Section with Fixed Page Structure -->
    <div id="content">
      <!-- Overview Page -->
      <div id="overview" class="page active">
        <h2>Dashboard Overview</h2>
        <div class="row mt-4">
          <div class="col-md-4">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Account Health</h5>
                <div class="metric">
                  <div class="d-flex justify-content-between">
                    <span>Non-fulfillment Rate</span>
                    <span id="nonFulfillRate">3.5% <i class="bi bi-arrow-down"></i> -0.8%</span>
                  </div>
                  <div class="d-flex justify-content-between mt-2">
                    <span>Shop Rating</span>
                    <span id="shopRating">4.85 <i class="bi bi-arrow-up"></i> +0.2%</span>
                  </div>
                  <div class="d-flex justify-content-between mt-2">
                    <span>Penalty Points</span>
                    <span id="penaltyPoints">0 <i class="bi bi-arrow-up"></i> +0.0%</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Late Shipments Card -->
          <div class="col-md-4">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Late Shipment</h5>
                <div class="metric">
                  <div class="d-flex justify-content-between">
                    <span>Total Late Orders</span>
                    <span id="lateOrders">2 <i class="bi bi-arrow-down"></i> -1.5%</span>
                  </div>
                  <div class="d-flex justify-content-between mt-2">
                    <span>Average Delay</span>
                    <span id="avgDelay">2.5 days <i class="bi bi-arrow-up"></i> +0.5%</span>
                  </div>
                  <div class="d-flex justify-content-between mt-2">
                    <span>On-time Rate</span>
                    <span id="onTimeRate">95% <i class="bi bi-arrow-up"></i> +1.2%</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Low Ratings Card -->
          <div class="col-md-4">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Low Ratings</h5>
                <div class="metric">
                  <div class="d-flex justify-content-between">
                    <span>Low Rated Orders</span>
                    <span id="lowRatedOrders">2 <i class="bi bi-arrow-down"></i> -2.0%</span>
                  </div>
                  <div class="d-flex justify-content-between mt-2">
                    <span>Average Rating</span>
                    <span id="avgRating">1.5★ <i class="bi bi-arrow-down"></i> -0.5%</span>
                  </div>
                  <div class="d-flex justify-content-between mt-2">
                    <span>Response Time</span>
                    <span id="responseTime">24h <i class="bi bi-arrow-up"></i> +1.0%</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Account Health Shopee MY Page -->
      <div id="account-health-shopee-my" class="page">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h2>Account Health - Shopee MY</h2>
        </div>
        <div class="card mb-4">
          <div class="card-body">
            <h5 class="card-title mb-3">Weekly Performance</h5>
            <div id="shopeeMYCalendarContainer"></div>
          </div>
        </div>
        <div class="table-responsive">
          <p class="text-muted mb-2" style="font-size: 14px;">
            Click the headers to sort the columns.
          </p>
          <table class="table">
            <thead>
              <tr>
                <th data-column="shop_name">Shop Name<br><br><br></th>
                <th data-column="non_fulfillment_rate">Non-fulfillment Rate <br><br><span>(&lt;5%)</span></th>
                <th data-column="late_shipment_rate">Late Shipment Rate <br><br> <span>(&lt;5%)</span></th>
                <th data-column="preparation_time">Preparation Time<br><br> <span>(&lt;1 day)</span></th>
                <th data-column="fast_handover_rate">Fast Handover Rate <br><br> <span>(&gt;90%)</span></th>
                <th data-column="response_rate">Response Rate<br><br><span>(&gt;85%)</span></th>
                <th data-column="average_response_time">Average Response Time<br><br><span>(&lt;2.0)</span></th>
                <th data-column="shop_rating">Shop Rating<br><br><span>(&gt;4.70)</span></th>
                <th data-column="penalty_points">Penalty Points<br><br><span>(&lt;1)</span></th>
              </tr>
            </thead>
            <tbody id="shopeeMYPerformanceTable">
              <!-- Table data populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Account Health Shopee SG Page -->
      <div id="account-health-shopee-sg" class="page">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h2>Account Health - Shopee SG</h2>
        </div>
        <div class="card mb-4">
          <div class="card-body">
            <h5 class="card-title mb-3">Weekly Performance</h5>
            <div id="shopeeSGCalendarContainer"></div>
          </div>
        </div>
        <div class="table-responsive">
          <p class="text-muted mb-2" style="font-size: 14px;">
            Click the headers to sort the columns.
          </p>
          <table class="table">
            <thead>
              <tr>
                <th data-column="shop_name">Shop Name<br><br><br></th>
                <th data-column="non_fulfillment_rate">Non-fulfillment Rate <br><br><span>(&lt;5%)</span></th>
                <th data-column="late_shipment_rate">Late Shipment Rate <br><br> <span>(&lt;5%)</span></th>
                <th data-column="preparation_time">Preparation Time<br><br> <span>(&lt;1 day)</span></th>
                <th data-column="fast_handover_rate">Fast Handover Rate <br><br> <span>(&gt;90%)</span></th>
                <th data-column="response_rate">Response Rate<br><br><span>(&gt;85%)</span></th>
                <th data-column="average_response_time">Average Response Time<br><br><span>(&lt;2.0)</span></th>
                <th data-column="shop_rating">Shop Rating<br><br><span>(&gt;4.70)</span></th>
                <th data-column="penalty_points">Penalty Points<br><br><span>(&lt;1)</span></th>
              </tr>
            </thead>
            <tbody id="shopeeSGPerformanceTable">
              <!-- Table data populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Account Health TikTok Page -->
      <div id="account-health-tiktok" class="page">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h2>Account Health - TikTok</h2>
        </div>
        <div class="card mb-4">
          <div class="card-body">
            <h5 class="card-title mb-3">Weekly Performance</h5>
            <div id="tiktokCalendarContainer"></div>
          </div>
        </div>
        <div class="table-responsive">
          <p class="text-muted mb-2" style="font-size: 14px;">
            Click the headers to sort the columns.
          </p>
          <table class="table">
            <thead>
              <tr>
                <th data-column="shop_name">Shop Name<br><br><br></th>
                <th data-column="shop_violations">Shop Violations<br><br><span>(&lt;0)</span></th>
                <th data-column="product_violations">Product Violations<br><br><span>(&lt;0)</span></th>
                <th data-column="late_dispatch_rate">Late Dispatch Rate<br><br><span>(≤ 4.00%)</span></th>
                <th data-column="response_rate">24-hour Response Rate<br><br><span>(≥ 85.00%)</span></th>
                <th data-column="negative_review_rate" style="white-space: nowrap; overflow: visible;">Seller-Related Negative Review Rate<br><br><span>(≤ 0.50%)</span></th>
                <th data-column="defective_order_return">Defective Order Return<br><br><span>(≤ 1.50%)</span></th>
                <th data-column="store_ratings">Store Ratings<br><br><span>(≥ 4.5)</span></th>
              </tr>
            </thead>
            <tbody id="tiktokPerformanceTable">
              <!-- Table data populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
              
     <!-- Late Shipment Pages Container - Added wrapping div with lateshipment-page class -->
<div class="lateshipment-page">
  <!-- Late Shipment Shopee MY Page -->
  <div id="late-shipment-shopee-my" class="page">
    <div class="page-header">
      <h1>Late Shipment - Shopee MY</h1>
      <div class="shop-selector">
        <button id="shopeeMyShopButton" class="shop-button">
          Choose Shop
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke-width="1.5" stroke="currentColor" class="icon">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
          </svg>
        </button>
        <div id="shopeeMyShopMenu" class="shop-menu hidden">
          <button class="shop-option" data-shop="Adelmar" style="color: grey;">Adelmar</button>
          <button class="shop-option" data-shop="Bahemas" style="color: grey;">Bahemas</button>
          <button class="shop-option" data-shop="Bidarimu" style="color: grey;">Bidarimu</button>
          <button class="shop-option" data-shop="Chairsy" style="color: grey;">Chairsy</button>
          <button class="shop-option" data-shop="Das.Nature" style="color: grey;">Das.Nature</button>
          <button class="shop-option" data-shop="Das.Nature2" style="color: grey;">Das.Nature2</button>
          <button class="shop-option" data-shop="Dutchgaming" style="color: grey;">Dutchgaming</button>
          <button class="shop-option" data-shop="Emas Gift" style="color: grey;">Emas Gift</button>
          <button class="shop-option" data-shop="Flashree" style="color: grey;">Flashree</button>
          <button class="shop-option" data-shop="Fynnkoffer" style="color: grey;">Fynnkoffer</button>
          <button class="shop-option" data-shop="Hiranai" style="color: grey;">Hiranai</button>
          <button class="shop-option" data-shop="Jagerhelmet" style="color: grey;">Jagerhelmet</button>
          <button class="shop-option" data-shop="Karlmobel" style="color: grey;">Karlmobel</button>
          <button class="shop-option" data-shop="Martenkaiser" style="color: grey;">Martenkaiser</button>
          <button class="shop-option" data-shop="Masongym" style="color: grey;">Masongym</button>
          <button class="shop-option" data-shop="Murahya" style="color: grey;">Murahya</button>
          <button class="shop-option" data-shop="Secret Racer" style="color: grey;">Secret Racer</button>
          <button class="shop-option" data-shop="Solaree" style="color: grey;">Solaree</button>
          <button class="shop-option" data-shop="Valuesnap" style="color: grey;">Valuesnap</button>
          <button class="shop-option" data-shop="Wilmermobel" style="color: grey;">Wilmermobel</button>
        </div>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-calendar"></i></span>
          <input type="text" id="shopeeMyDateRangeInput" class="form-control" placeholder="Select Date Range">
        </div>
      </div>
    </div>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Order ID</th>
            <th style="white-space: nowrap; overflow: visible;">Order Date</th>
            <th>Shop Name</th>
            <th>Product Information</th>
            <th>Shipping Channel</th>
            <th>Status</th>
            <th>Remark</th>
          </tr>
        </thead>
        <tbody id="shopeeMyOrdersTableBody">
          <!-- Table content will be populated by JavaScript -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Late Shipment Shopee SG Page -->
  <div id="late-shipment-shopee-sg" class="page">
    <div class="page-header">
      <h1>Late Shipment - Shopee SG</h1>
      <div class="shop-selector">
        <button id="shopeeSgShopButton" class="shop-button">
          Choose Shop
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke-width="1.5" stroke="currentColor" class="icon">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
          </svg>
        </button>
        <div id="shopeeSgShopMenu" class="shop-menu hidden">
          <!-- Shop options will be dynamically added with JavaScript -->
        </div>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-calendar"></i></span>
          <input type="text" id="shopeeSgDateRangeInput" class="form-control" placeholder="Select Date Range">
        </div>
      </div>
    </div>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Order ID</th>
            <th style="white-space: nowrap; overflow: visible;">Order Date & Time</th>
            <th>Shop Name</th>
            <th>Product Information</th>
            <th>Shipping Channel</th>
            <th>Status</th>
            <th>Remark</th>
          </tr>
        </thead>
        <tbody id="shopeeSgOrdersTableBody">
          <!-- Table content will be populated by JavaScript -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Late Shipment TikTok Page -->
  <div id="late-shipment-tiktok" class="page">
    <div class="page-header">
      <h1>Late Shipment - TikTok</h1>
      <div class="shop-selector">
        <button id="tiktokShopButton" class="shop-button">
          Choose Shop
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke-width="1.5" stroke="currentColor" class="icon">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
          </svg>
        </button>
        <div id="tiktokShopMenu" class="shop-menu hidden">
          <button class="shop-option" data-shop="Adelmar">Adelmar</button>
          <button class="shop-option" data-shop="Das.Nature">Das.Nature</button>
          <button class="shop-option" data-shop="Hiranai">Hiranai</button>
          <button class="shop-option" data-shop="Jagerhelmet">Jagerhelmet</button>
          <button class="shop-option" data-shop="Karlmobel">Karlmobel</button>
          <button class="shop-option" data-shop="Murahya">Murahya</button>
          <button class="shop-option" data-shop="Valuesnap">Valuesnap</button>
          <button class="shop-option" data-shop="Wilmermobel">Jager</button>
        </div>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-calendar"></i></span>
          <input type="text" id="tiktokDateRangeInput" class="form-control" placeholder="Select Date Range">
        </div>
      </div>
    </div>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Order ID</th>
            <th style="white-space: nowrap; overflow: visible;">Order Date & Time</th>
            <th>Shop Name</th>
            <th>Product Information</th>
            <th>Shipping Channel</th>
            <th>Status</th>
            <th>Remark</th>
          </tr>
        </thead>
        <tbody id="tiktokOrdersTableBody">
          <!-- Table content will be populated by JavaScript -->
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Stock Count Page -->
 <!-- Stock Count Page -->
<div id="stock-count" class="page">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Stock Count</h2>
    <div class="d-flex gap-3 align-items-center">
      <!-- Removed Date Range Picker -->
    </div>
  </div>

  <!-- Summary Cards (Mini Dashboard) -->
  <div class="row mb-4">
    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Total SKUs</h5>
          <div class="metric">
            <div class="d-flex justify-content-between align-items-center">
              <span class="fs-4 fw-bold">11439</span>
              <span class="text-success"><i class="bi bi-arrow-up"></i> +1</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Low Stock Items</h5>
          <div class="metric">
            <div class="d-flex justify-content-between align-items-center">
              <span class="fs-4 fw-bold">1149</span>
              <span class="text-warning"><i class="bi bi-exclamation-triangle"></i> +1</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Out of Stock Items</h5>
          <div class="metric">
            <div class="d-flex justify-content-between align-items-center">
              <span class="fs-4 fw-bold">2345</span>
              <span class="text-danger"><i class="bi bi-x-circle"></i> +1</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Stock Overview Table -->
  <div class="card mb-4">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="card-title mb-0">Stock Overview</h5>
        <div class="d-flex gap-2">
          <!-- Search Bar with Enhanced Button -->
          <div class="input-group" style="max-width: 250px;">
            <input
              type="text"
              id="stockSearchInput"
              class="form-control"
              placeholder="Search by SKU or Product"
            />
            <button class="btn btn-primary enhanced-search-btn" type="button" id="stockSearchButton">
              <i class="bi bi-search"></i>
            </button>
          </div>
          <!-- Filter Dropdown -->
          <div class="dropdown">
            <button
              class="btn btn-outline-primary dropdown-toggle"
              type="button"
              id="stockFilterDropdown"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="bi bi-filter"></i> Filter
            </button>
            <ul class="dropdown-menu" aria-labelledby="stockFilterDropdown">
              <li><a class="dropdown-item" href="#" data-filter="all">All</a></li>
              <li><a class="dropdown-item" href="#" data-filter="low-stock">Low Stock</a></li>
              <li><a class="dropdown-item" href="#" data-filter="out-of-stock">Out of Stock</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="table-responsive">
        <p class="text-muted mb-2" style="font-size: 12px;">
          Click the headers to sort the columns.
        </p>
        <table class="table table-hover table-striped" id="stockCountTable">
          <thead>
            <tr>
              <th data-column="sku" class="sortable">SKU Input</th>
              <th data-column="product" class="sortable">Product Variation</th>
              <th data-column="total_sales" class="sortable">Total Sales</th>
              <th data-column="current_stock" class="sortable">Current Stock</th>
              <th data-column="incoming_stock" class="sortable">Incoming Stock</th>
              <th data-column="stock_reserve" class="sortable">Reserve Stock</th>
              <th data-column="lead_time" class="sortable">Lead Time</th>
              <th data-column="total_stock" class="sortable">Total Stock</th>
            </tr>
          </thead>
          <tbody id="stockCountTableBody">
            <!-- Sample Data (to be replaced by API) -->

          </tbody>
        </table>
      </div>
      <!-- Pagination -->
      <nav aria-label="Stock count pagination" class="mt-4">
        <nav aria-label="Stock count pagination" class="mt-4">
          <ul class="pagination justify-content-center">
          </ul>
        </nav>
      </nav>
    </div>
  </div>
</div>
<!-- END OF STOCK COUNT -->
    <!-- Return Item Pages Container - Added wrapping div with returnitem-page class -->
<div class="returnitem-page">
  <!-- Return Item Submission Page -->
  <div id="return-item-submit" class="page">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2>Submit Return Request</h2>
    </div>
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title mb-3">Return Item Details</h5>
        <!-- Ensure method, action, and enctype are set correctly -->
        <form
          id="returnItemForm"
          method="POST"
          action="/returns"
          enctype="multipart/form-data"
        >
          <!-- Tracking Number Field -->
          <div class="mb-3">
            <label for="trackingNumber" class="form-label">Tracking Number</label>
            <input
              type="text"
              class="form-control"
              id="trackingNumber"
              name="trackingNumber"
              required
            />
          </div>

          <!-- Return Type Dropdown -->
          <div class="mb-3">
            <label for="returnType" class="form-label">Return Type</label>
            <select
              class="form-select"
              id="returnType"
              name="reason"
              required
            >
              <option value="" selected disabled>Select return type</option>
              <option value="resell">Resell</option>
              <option value="damage">Damage</option>
            </select>
          </div>

          <!-- Hidden applicant field (populated via Firebase) -->
          <input type="hidden" id="applicant" name="applicant" />

          <!-- File Upload -->
          <div class="mb-3">
            <label for="returnFiles" class="form-label">Upload Images/Videos</label>
            <input
              class="form-control"
              type="file"
              id="returnFiles"
              name="media"
              multiple
              accept="image/*,video/*"
            />
            <div class="form-text">Upload up to 5 files. Maximum file size: 10MB each.</div>

            <!-- Preview Container -->
            <div id="filePreviewContainer" class="mt-3 d-flex flex-wrap gap-2"></div>
          </div>

          <!-- Submit Button -->
          <button type="submit" class="btn btn-primary">Submit Return Request</button>
        </form>
      </div>
    </div>
  </div>
  <!-- End Return Item Submission Page -->
  
 <!-- Return Item History Page -->
<div id="return-item-history" class="page">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Return History</h2>
    <div class="input-group" style="max-width: 300px;">
      <input
        type="text"
        id="returnSearchInput"
        class="form-control"
        placeholder="Search by tracking number"
      />
      <button class="btn btn-outline-secondary" type="button">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </div>

  <div class="card">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th>Tracking Number</th>
              <th>Return Type</th>
              <th>Applicant</th>
              <th>Submission Date</th>
              <th>Media</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="returnHistoryTable">
            <tr>
              <td colspan="6" class="text-center">No return requests found</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<!-- End Return Item History Page -->

<div class="repairs-page">
  <!-- Repairs Submission Page -->
  <div id="repairs-submit" class="page">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2>Submit Repair Request</h2>
    </div>
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title mb-3">Repair Details</h5>
        <!-- Ensure method, action, and enctype are set correctly -->
        <form
          id="repairItemForm"
          method="POST"
          action="/repairs"
          enctype="multipart/form-data"
        >
          <!-- Receive Date Field -->
          <div class="mb-3">
            <label for="receiveDate" class="form-label">Receive Date</label>
            <input
              type="date"
              class="form-control"
              id="receiveDate"
              name="receive_date" 
              required
            />
          </div>
          
          <div class="mb-3">
            <label for="repairDate" class="form-label">Repair Date</label>
            <input
              type="date"
              class="form-control"
              id="repairDate"
              name="repair_date" 
              required
            />
          </div>

          <!-- Repair Purpose Dropdown -->
          <div class="mb-3">
            <label for="repairPurpose" class="form-label">Repair Purpose</label>
            <select
              class="form-select"
              id="repairPurpose"
              name="purpose"
              required
            >
              <option value="" selected disabled>Select repair purpose</option>
              <option value="resell">Resell</option>
              <option value="customer">Customer</option>
            </select>
          </div>

          <!-- Order ID Field (conditional) -->
          <div class="mb-3" id="orderIdContainer">
            <label for="orderId" class="form-label">Order ID (if applicable)</label>
            <input
              type="text"
              class="form-control"
              id="orderId"
              name="order_id"
            />
          </div>

          <!-- Variation Field -->
          <div class="mb-3">
            <label for="variation" class="form-label">Variation</label>
            <input
              type="text"
              class="form-control"
              id="variation"
              name="variation"
              required
            />
          </div>

          <!-- Issues Field -->
          <div class="mb-3">
            <label for="issues" class="form-label">Issue(s)</label>
            <textarea
              class="form-control"
              id="issues"
              name="issue"
              rows="3"
              required
            ></textarea>
          </div>

          <!-- Actions for Repair Field -->
          <div class="mb-3">
            <label for="repairActions" class="form-label">Actions for Repair</label>
            <textarea
              class="form-control"
              id="repairActions"
              name="actions"
              rows="3"
              required
            ></textarea>
          </div>

          <!-- Hidden applicant field (populated via Firebase) -->
          <input type="hidden" id="repairApplicant" name="applicant" />

          <!-- File Upload -->
          <div class="mb-3">
            <label for="repairFiles" class="form-label">Upload Images/Videos</label>
            <input
              class="form-control"
              type="file"
              id="repairFiles"
              name="media"
              multiple
              accept="image/*,video/*"
            />
            <div class="form-text">Upload up to 5 files. Maximum file size: 10MB each.</div>

            <!-- Preview Container -->
            <div id="repairFilePreviewContainer" class="mt-3 d-flex flex-wrap gap-2"></div>
          </div>

          <!-- Submit Button -->
          <button type="submit" class="btn btn-primary">Submit Repair Request</button>
        </form>
      </div>
    </div>
  </div>
  <!-- End Repairs Submission Page -->
  
  <!-- Repairs History Page -->
  <div id="repairs-history" class="page">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2>Repairs History</h2>
      <div class="input-group" style="max-width: 300px;">
        <input
          type="text"
          id="repairSearchInput"
          class="form-control"
          placeholder="Search repairs"
        />
        <button class="btn btn-outline-secondary" type="button">
          <i class="bi bi-search"></i>
        </button>
      </div>
    </div>

    <div class="card">
      <div class="card-body">
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th>Repair ID</th>
                <th>Receive Date</th>
                <th>Repair Date</th>
                <th>Purpose</th>
                <th>Order ID</th>
                <th>Variation</th>
                <th>Issue</th>
                <th>Actions</th>
                <th>Applicant</th>
                <th>Media</th>
                <th>Edit/Delete</th> <!-- Added new column for edit/delete buttons -->
              </tr>
            </thead>
            <tbody id="repairsHistoryTable">
              <tr>
                <td colspan="11" class="text-center">No repair requests found</td> <!-- Updated colspan from 10 to 11 -->
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <!-- End Repairs History Page -->

      <!-- Settings Page -->
      <div id="settings" class="page">
        <h2>Settings</h2>
        <div class="card mt-4">
          <div class="card-body">
            <h5 class="card-title">General Settings</h5>
            <form>
              <div class="mb-3">
                <label class="form-label">Notification Preferences</label>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="emailNotif" checked>
                  <label class="form-check-label" for="emailNotif">Email Notifications</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="smsNotif" checked>
                  <label class="form-check-label" for="smsNotif">SMS Notifications</label>
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label" for="language">Language</label>
                <select class="form-select" id="language">
                  <option>English</option>
                  <option>中文</option>
                  <option>Bahasa Indonesia</option>
                </select>
              </div>
              <div class="mb-3">
                <label class="form-label" for="timezone">Time Zone</label>
                <select class="form-select" id="timezone">
                  <option>UTC+08:00 Singapore</option>
                  <option>UTC+07:00 Jakarta</option>
                  <option>UTC+09:00 Tokyo</option>
                </select>
              </div>
              <button type="submit" class="btn btn-primary">Save Changes</button>
            </form>
            <hr>
            <!-- Sign Out Button -->
            <button id="signOutButton" class="btn btn-danger mt-3">Sign Out</button>
          </div>
        </div>
      </div>
    </div>

  <!-- External Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  
  <!-- Firebase SDKs (Compat versions) -->
  <script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-auth-compat.js"></script>
  
  <!-- Local Scripts -->
  <script src="api.js"></script>
  <script src="script.js"></script>
  <script src="Lateshipment.js"></script>
  <script src="returnitem.js"></script>
  <script src="repair.js"></script>
  <script src="update.js"></script>
  <script src="delete.js"></script>

  <!-- File Preview Code -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const fileInput = document.getElementById('returnFiles');
      const previewContainer = document.getElementById('filePreviewContainer');

      fileInput.addEventListener('change', () => {
        // Clear old previews
        previewContainer.innerHTML = '';

        const files = fileInput.files;
        for (const file of files) {
          if (file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = (evt) => {
              const img = document.createElement('img');
              img.src = evt.target.result;
              img.classList.add('preview-image'); // optional CSS class
              previewContainer.appendChild(img);
            };
            reader.readAsDataURL(file);
          } else if (file.type.startsWith('video/')) {
            const reader = new FileReader();
            reader.onload = (evt) => {
              const vid = document.createElement('video');
              vid.src = evt.target.result;
              vid.controls = true;
              vid.classList.add('preview-video'); // optional CSS class
              previewContainer.appendChild(vid);
            };
            reader.readAsDataURL(file);
          }
        }
      });
    });
  </script>

  <script>
    // Firebase configuration (same as index.html)
    const firebaseConfig = {
      apiKey: "AIzaSyCqV-Y1w8Izfjz0Mt1FfKR7m_ODOrFWjXE",
      authDomain: "awesomeree-internal.firebaseapp.com",
      projectId: "awesomeree-internal",
      storageBucket: "awesomeree-internal.firebasestorage.app",
      messagingSenderId: "480968179782",
      appId: "1:480968179782:web:3de39ed98a795874c90a47",
      measurementId: "G-1K8H3XGMHE"
    };

    // Initialize Firebase if not already
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }

    // Check authentication state on page load
    firebase.auth().onAuthStateChanged(user => {
      if (user) {
        document.getElementById('applicant').value = user.email;
      }
    });

    // Sign Out Button (if included in your Settings page, for example)
    document.addEventListener('DOMContentLoaded', () => {
      const signOutButton = document.getElementById('signOutButton');

      // Listen for changes in the auth state
      firebase.auth().onAuthStateChanged(user => {
        if (user) {
          // Update the sign-out button to display the user’s email
          signOutButton.textContent = `Sign Out (${user.email})`;
        } else {
          // If not signed in, default to just "Sign Out" or hide the button
          signOutButton.textContent = 'Sign Out';
        }
      });

      // Sign out logic
      if (signOutButton) {
        signOutButton.addEventListener('click', () => {
          firebase.auth().signOut()
            .then(() => {
              window.location.href = '/';
            })
            .catch((error) => {
              console.error("Error signing out:", error);
            });
        });
      }
    });

    // Page navigation functions
    window.showPage = function(pageId) {
      const pages = document.querySelectorAll('.page');
      pages.forEach(page => page.classList.remove('active'));
      const targetPage = document.getElementById(pageId);
      if (targetPage) {
        targetPage.classList.add('active');
      }
    };

    window.toggleSidebar = function() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('collapsed');
      const content = document.getElementById('content');
      content.classList.toggle('expanded');
    };
  </script>
</body>
</html>